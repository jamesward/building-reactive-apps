<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Reactive Apps</title>

    <meta name="description" content="Non-blocking, asynchronous, and reactive are all the rage today. This session will explore why the patterns are important in modern apps and how to apply them to event-driven web, mobile, and RESTful apps. To illustrate the concepts, Java, Scala, Akka, and Play Framework will be used as examples.">
    <meta name="author" content="James Ward">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <style type="text/css">
    .reveal .controls {
        bottom: auto;
        top: 0px;
    }
    </style>
</head>
<body>

<div class="reveal">

<aside style="display: block; position: fixed; bottom: 5px; left: 10px; z-index: 30;">
    <a href="http://typesafe.com"><img src="assets/logo.png"></a>
</aside>

<aside style="display: block; position: fixed; bottom: 10px; right: 10px; z-index: 30;">
    <a href="http://twitter.com/_JamesWard"  style="font-size: 20px;">@_JamesWard</a>
</aside>

<div class="slides">
    
    <section>
        <h2>Building Reactive Apps</h2>
        <p>
            <small><a href="http://www.jamesward.com">James Ward</a> ~ <a href="http://twitter.com/_jamesward">@_JamesWard</a></small>
        </p>
    </section>
    
    <section data-markdown>
        <script type="text/template">
            ## Going Reactive
            ### www.ReactiveManifesto.org

            <img src="assets/full-reactive.png" style="background-color: #ffffff">
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ## Async + Non-Blocking
            ### Scalability with Event-Driven Thread Usage

            * Reactive Requests
            * Reactive Composition
            * Reactive Push
            * 2-Way Reactive
        </script>
    </section>
    <section>
        <h2>Reactive Requests</h2>
        <img src="assets/reactive-requests.png">
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Blocking Request

                def foo = Action {
                  Ok("foo")
                }

            ### Async Request

                def foo = Action.async {
                    Future.successful(Ok("foo"))
                }
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Reactive Request (Async + Non-Blocking)

                def pause(duration: Int) = Action.async {
                  Promise.timeout(Ok(duration.toString), duration seconds)
                }

            ### Reactive WS Client

                val f: Future[Response] = WS.url("http://www.foo.com").get
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Reactive Composition

                def foo = Action.async {
                  val futureResponse = WS.url("http://www.foo.com").get
                  futureResponse.map { response =>
                    Ok(response.body)
                  }
                }
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Reactive Composition

                def foo = Action.async {
                  val futureJW = WS.url("http://www.jamesward.com").get
                  val futureTwitter = WS.url("http://www.twitter.com").get
                  for {
                    jw <- futureJW
                    twitter <- futureTwitter
                  } yield Ok(jw.response.body + twitter.response.body)
                }
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Reactive Push with SSE

            Server-side:
                    
                def events = Action {
                  val (enumerator, channel) = Concurrent.broadcast[String]

                  Promise.timeout(channel.push("hello"), 1.second)
    
                  Ok.feed(enumerator &> EventSource()).as(EVENT_STREAM)
                }

            Client-side:

                $ ->
                  events = new EventSource("/events")
                  events.onmessage = (e) ->
                    console.log(e.data)
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### 2-Way Reactive with WebSockets

            Server-side:
                    
                def echoWs = WebSocket.using[String] { request =>
                  val (enumerator, channel) = Concurrent.broadcast[String]
                  val in = Iteratee.foreach[String](channel.push)
                  (in, enumerator)
                }
    
            Client-side:
                
                $ ->
                  ws = new WebSocket("ws://localhost:9000/echo")
                  ws.onopen = () ->
                    ws.send("foo")
                  ws.onmessage = (message) ->
                    console.log(message.data)
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Resilient Futures

                future.recover {
                  case Exception =>
                    Logger.error("Failed!")
                    InternalServerError("Boum!")
                }
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Actors: Better Scalability & Resilience

            <img src="assets/akka-actors.png" style="background-color: #ffffff; width: 700px;">
            
            * Event-Driven
            * Non-request based lifecycle
            * Managed Concurrency
            * Isolated Failure Handling (Supervision)
            * Scales up & out
        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
            ### Demo: Reactive Stocks

            [http://typesafe.com/activator/template/reactive-stocks](http://typesafe.com/activator/template/reactive-stocks)
        </script>
    </section>
</div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: false,
        rollingLinks: false,
        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
            { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
            // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
    });

</script>

</body>
</html>
